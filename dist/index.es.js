import React,{useState,useRef,useEffect,Fragment}from"react";import{makeStyles,colors,Snackbar,SnackbarContent,IconButton,Icon,Paper,Grid,Fade,Typography,ButtonBase,Fab}from"@material-ui/core";import PropTypes from"prop-types";function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}const DropzoneAreaStyle=a=>({fullWidth:{width:"100%",height:"100%"},relative:{position:"relative"},dropzone:{display:"flex",justifyContent:"space-evenly",alignContent:"center",alignItems:"center",flexFlow:"column wrap",backgroundColor:"#f4f4f4",transition:"all .15s ease-in-out",width:"100%",padding:a.spacing(4)},dropzone_banner:{display:"flex",justifyContent:"space-evenly",alignContent:"center",alignItems:"center",flexFlow:"column wrap"},round:{borderRadius:a.spacing(3)},dropzone_iconBtn:{margin:a.spacing(3,0)},dropzone_icon:{fontSize:48,color:"deepBlue"},dropzone_is_dragover:{backgroundColor:"#EAF2F8 !important",border:"2px dashed #666 !important"},dropzone_is_dragover_danger:{backgroundColor:"#F5B7B1",border:"2px dashed red"},dropzone_overlay:{backgroundColor:"rgba(0,0,0,.75)",position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center",flexFlow:"column wrap"}}),DropzoneCardStyle=a=>({fullWidth:{width:"100%",height:"100%"},relative:{position:"relative"},dropzone:{minHeight:"auto",padding:a.spacing(4)},dropzone_banner:{position:"relative",display:"flex",justifyContent:"space-evenly",alignContent:"center",alignItems:"center",flexFlow:"column wrap",borderRadius:a.spacing(4)},round:{borderRadius:a.spacing(4)},dropzone_iconBtn:{margin:a.spacing(3,0)},dropzone_icon:{fontSize:24},dropzone_is_dragover:{backgroundColor:"#EAF2F8 !important",border:"2px dashed #666 !important"},dropzone_is_dragover_danger:{backgroundColor:"#F5B7B1",border:"2px dashed red"},dropzone_overlay_img:{left:-a.spacing(4),right:-a.spacing(4),top:-a.spacing(4),bottom:-a.spacing(4),height:"auto",width:"100%"},dropzone_topRight_btn:{position:"absolute",right:0,top:0,backgroundColor:"#fff",padding:8}}),FileButtonStyles=a=>({fab:{margin:a.spacing(1)},extendedIcon:{marginRight:a.spacing(1)}});window.URL=window.URL||window.webkitURL;const fileReader=async a=>{let b=await readFile(a);return b},readFile=a=>{const b=new FileReader;return new Promise((c,d)=>{b.onerror=()=>{b.abort(),d(new DOMException("Problem parsing input file."))},b.onload=()=>{c(b.result)},b.readAsDataURL(a)})},sizeConverter=(a,b)=>{var c=Math.abs,d=b?1e3:1024;if(c(a)<d)return a+" B";var e=b?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],f=-1;do a/=d,++f;while(c(a)>=d&&f<e.length-1);return a.toFixed(1)+" "+e[f]},mimeType=()=>({audio:"library_music",application:"format_shapes",font:"all_out",text:"text_format",video:"play_circle_outline"}),{amber,green}=colors,variantIcon={success:({...a})=>React.createElement(Icon,a,"check_circle"),warning:({...a})=>React.createElement(Icon,a,"warning"),error:({...a})=>React.createElement(Icon,a,"error"),info:({...a})=>React.createElement(Icon,a,"info")},CloseIcon=({...a})=>React.createElement(Icon,a,"close"),styles=makeStyles(a=>({success:{backgroundColor:green[600]},error:{backgroundColor:a.palette.error.dark},info:{backgroundColor:a.palette.primary.main},warning:{backgroundColor:amber[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:a.spacing(1)},message:{display:"flex",alignItems:"center",textTransform:"capitalize"}})),SnacbarHelper=({className:c="",open:d=!1,message:e="",onClose:a,variant:f="info",...b})=>{const g=styles(),h=variantIcon[f];return React.createElement(Snackbar,{open:d},React.createElement(SnackbarContent,_extends({className:[g[f],c].join(" "),"aria-describedby":"client-snackbar",message:React.createElement("span",{id:"client-snackbar",className:g.message},React.createElement(h,{className:[g.icon,g.iconVariant].join(" ")}),e),action:[React.createElement(IconButton,{key:"close","aria-label":"close",color:"inherit",onClick:a},React.createElement(CloseIcon,{className:g.icon}))]},b)))};SnacbarHelper.propTypes={className:PropTypes.string,message:PropTypes.string,onClose:PropTypes.func,variant:PropTypes.oneOf(["error","info","success","warning"]).isRequired};const snackBarHelperMessage={limitedFile:"You have reached the file upload limit",typeError:"wrong file type",success:"file(s) added",sizeError:"Too large file",delete:"file(s) deleted"};let func=()=>{};const UploadWrapper=({onChange:b=func,type:c="image",wrapperStyle:d="",getProcessedData:f=func,wrapperProps:g={},inside:h=!0,preview:i=!0,limit:j=1,fileSizeLimit:k=1048576,BannerComponent:a,snackBarMessage:l=snackBarHelperMessage,render:m=Fragment})=>{const[n,o]=useState({files:[],imgUrl:[]}),[p,q]=useState({variant:"info",message:"",visible:!1}),r=useRef(null),s=useRef(null),t=makeStyles(DropzoneAreaStyle)();useEffect(()=>{["drag","dragstart","dragend","dragover","dragenter","dragleave"].map(a=>r.current.addEventListener(a,function(a){a.preventDefault(),a.stopPropagation()})),["dragover","dragenter"].map(a=>r.current.addEventListener(a,a=>{a.dataTransfer.items[0].type.split("/")[0]!==c||a.dataTransfer.items.length+n.files.length>j?r.current.classList.add(t.dropzone_is_dragover_danger):r.current.classList.add(t.dropzone_is_dragover)})),["dragleave","dragend"].map(a=>r.current.addEventListener(a,()=>{r.current.classList.remove(t.dropzone_is_dragover,t.dropzone_is_dragover_danger)})),r.current.onClick=()=>{}},[]);const u=async a=>{a.preventDefault(),a.stopPropagation(),r.current.classList.remove(t.dropzone_is_dragover,t.dropzone_is_dragover_danger);let d=a.target.files||a.dataTransfer.files,{imgUrl:e,files:g}=n;if(d.length+n.files.length>j)return void q({...p,variant:"warning",message:l.limitedFile,visible:!0});for(let b of d){if(b.type.split("/")[0]!==c)return r.current.classList.add(t.dropzone_is_dragover_danger),q({...p,variant:"error",message:l.typeError,visible:!0}),!1;if(k<b.size)return r.current.classList.add(t.dropzone_is_dragover_danger),q({...p,variant:"error",message:l.sizeError,visible:!0}),!1;g.push(b),e.push({src:await fileReader(b),file:b})}q({...p,variant:"success",message:l.success,visible:!0}),o({...n,files:g,imgUrl:e}),f(e),b(n)},v=a=>{n.imgUrl=n.imgUrl.filter((b,c)=>c!==a),n.files=n.files.filter((b,c)=>c!==a),o({...n}),b(n),q({...p,variant:"info",message:l["delete"],visible:!0})},w=()=>s.current.click();return React.createElement(React.Fragment,null,React.createElement(Paper,_extends({elevation:2},g,{ref:r,className:[t.dropzone,d].join(" "),onDrop:u}),React.createElement(a,{openFileDialog:w,size:n.files.length}),!0===i&&!0===h&&React.createElement(m,_extends({openFileDialog:w,onDelete:v},n))),!0===i&&!1===h&&React.createElement(m,_extends({openFileDialog:w,onDelete:v},n)),React.createElement("input",{type:"file",hidden:!0,ref:s,onChange:u}),React.createElement(SnacbarHelper,{variant:p.variant,open:p.visible,message:p.message,onClose:()=>q({...p,visible:!1})}))};UploadWrapper.propTypes={getProcessedData:PropTypes.func,onChange:PropTypes.func,type:PropTypes.string,wrapperProps:PropTypes.object,wrapperStyle:PropTypes.string,limit:PropTypes.number};let func$1=()=>{};const DropzoneArea=({onChange:d=func$1,type:e="image",wrapperStyle:f="",bannerStyle:g="",BannerComponent:a,getProcessedData:h=func$1,inside:i=!0,preview:j=!0,PreviewComponent:b,bannerText:k="Drag one or more files to this Drop Zone ...",uploadIcon:l="cloud_upload",wrapperProps:m={},limit:n=1,snackBarMessage:c})=>(a=a||DefaultBannerComponent,React.createElement(React.Fragment,null,React.createElement(UploadWrapper,_extends({onChange:d,type:e,wrapperStyle:f,getProcessedData:h,wrapperProps:m,limit:n,inside:i,preview:j,snackBarMessage:c},{BannerComponent:({...b})=>React.createElement(a,_extends({},b,{bannerStyle:g,bannerText:k,uploadIcon:l})),render:b||DefaultPreviewComponent}))));DropzoneArea.propTypes={BannerComponent:PropTypes.oneOfType([PropTypes.element,PropTypes.func]),PreviewComponent:PropTypes.oneOfType([PropTypes.element,PropTypes.func]),bannerStyle:PropTypes.string,bannerText:PropTypes.string,getProcessedData:PropTypes.func,inside:PropTypes.bool,limit:PropTypes.number,onChange:PropTypes.func,preview:PropTypes.bool,snackBarMessage:PropTypes.object,type:PropTypes.string,uploadIcon:PropTypes.string,wrapperProps:PropTypes.object,wrapperStyle:PropTypes.string};const ImageFileWrapper=({item:a,onDelete:b,index:c})=>{const d=makeStyles(DropzoneAreaStyle)();return React.createElement("div",{className:d.relative},React.createElement("img",{src:a.src,className:d.fullWidth}),React.createElement("div",{className:d.dropzone_overlay},React.createElement(Typography,{variant:"caption",color:"error"},sizeConverter(a.file.size)),React.createElement(IconButton,{color:"secondary",onClick:()=>b(c)},React.createElement(Icon,null,"delete"))))},DefaultPreviewComponent=({imgUrl:a,onDelete:b})=>React.createElement(Grid,{container:!0,spacing:3},a.map((a,c)=>React.createElement(Grid,{item:!0,xs:3,md:2,key:c},React.createElement(Fade,{in:!0,timeout:{enter:500*(c+1),exit:500*(c+1)}},"image"===a.file.type.split("/")[0]?React.createElement(ImageFileWrapper,{item:a,onDelete:b,index:c}):React.createElement(OtherFileWrapper,{item:a,onDelete:b,index:c}))))),OtherFileWrapper=({item:a,onDelete:b,index:c})=>{const d=makeStyles(DropzoneAreaStyle)();return React.createElement(Paper,{className:[d.dropzone_banner,d.paddingArea].join(" ")},React.createElement(Icon,{fontSize:"large"},mimeType()[a.file.type.split("/")[0]]),React.createElement("br",null),React.createElement("div",{className:d.dropzone_banner},React.createElement(Typography,{variant:"caption",color:"error"},sizeConverter(a.file.size)),React.createElement(IconButton,{color:"secondary",onClick:()=>b(c)},React.createElement(Icon,null,"delete"))))},DefaultBannerComponent=({uploadIcon:a,bannerStyle:b,openFileDialog:c,bannerText:d,...e})=>{const f=makeStyles(DropzoneAreaStyle)();return React.createElement("div",{className:[f.dropzone_banner,b].join(" ")},React.createElement(Typography,{variant:"h6"},d),React.createElement(IconButton,{color:"primary",className:f.dropzone_iconBtn,onClick:c},React.createElement(Icon,{className:f.dropzone_icon},a)))};let func$2=()=>{};const DropzoneCard=({onChange:c=func$2,type:d="image",wrapperStyle:e="",bannerStyle:f="",BannerComponent:a,getProcessedData:g=func$2,bannerText:h="Drag one or more files to this Drop Zone ...",uploadIcon:i="add",wrapperProps:j={},snackBarMessage:b})=>{a=a||DefaultBannerComponent$1;const k=makeStyles(DropzoneCardStyle)();return React.createElement(React.Fragment,null,React.createElement(UploadWrapper,_extends({onChange:c,type:d,wrapperStyle:[k.dropzone_banner,e].join(" "),getProcessedData:g,wrapperProps:j,limit:1,snackBarMessage:b},{BannerComponent:({...b})=>React.createElement(a,_extends({},b,{bannerStyle:f,bannerText:h,uploadIcon:i})),render:ImageFileWrapper$1})))};DropzoneCard.propTypes={BannerComponent:PropTypes.oneOfType([PropTypes.element,PropTypes.func]),bannerStyle:PropTypes.string,bannerText:PropTypes.string,getProcessedData:PropTypes.func,onChange:PropTypes.func,snackBarMessage:PropTypes.object,type:PropTypes.string,uploadIcon:PropTypes.string,wrapperProps:PropTypes.object,wrapperStyle:PropTypes.string};const ImageFileWrapper$1=({imgUrl:[b],onDelete:a,index:c=0})=>{const d=makeStyles(DropzoneCardStyle)();return console.log("i :",b),void 0!==b&&React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("img",{src:b.src,className:d.dropzone_overlay_img})),React.createElement("div",{className:d.dropzone_topRight_btn},React.createElement(ButtonBase,{color:"secondary",onClick:()=>a(c)},React.createElement(Icon,null,"close"))))},DefaultBannerComponent$1=({uploadIcon:a,bannerStyle:b,openFileDialog:c,bannerText:d,size:e,...f})=>{const g=makeStyles(DropzoneCardStyle)();return 0===e&&React.createElement("div",{className:[g.dropzone_banner,b].join(" ")},React.createElement(IconButton,{color:"default",onClick:c},React.createElement(Icon,{className:g.dropzone_icon},a)),React.createElement(Typography,{variant:"subtitle1",align:"center"},d))},FıleButton=({onChange:a,onError:b,inputProps:c={},fabText:d="",fabIcon:e="cloud_upload",fabProps:f={},ButtonComponent:g=Fab})=>{const h=useRef(null),[i,j]=useState({}),k=makeStyles(FileButtonStyles)();return useEffect(()=>{},[]),React.createElement(React.Fragment,null,React.createElement(g,_extends({variant:0<d.length?"extended":"round","aria-label":"delete",className:k.fab},f,{onClick:()=>h.current.click()}),React.createElement(Icon,{className:0<d.length?k.extendedIcon:""},e),d),React.createElement("input",_extends({type:"file",accept:"image/*,.pdf",ref:h,hidden:!0},c,{onChange:a,onError:b})))};FıleButton.propTypes={ButtonComponent:PropTypes.oneOfType([PropTypes.element,PropTypes.func,PropTypes.elementType]),fabIcon:PropTypes.string,fabProps:PropTypes.object,onChange:PropTypes.func,onError:PropTypes.func,fabText:PropTypes.string,inputProps:PropTypes.object};export{DropzoneArea,DropzoneCard,FıleButton as FileButton};
//# sourceMappingURL=index.es.js.map
